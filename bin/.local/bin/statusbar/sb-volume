#!/bin/sh

value=$(wpctl get-volume @DEFAULT_AUDIO_SINK@)
value=${value##Volume: }
value=${value%%.*}${value##*.}

case "$value" in
    *MUTED*)
        muted=1
        value=${value%% \[MUTED\]}
        ;;
esac

value=${value#0}
value=${value#0}

if [ -z "$muted" ]; then
    printf '[VOL %s%%]\n' "$value"
else
    printf '[VOL %s%% M]\n' "$value"
fi
