#!/bin/sh

BATTERY="BAT1"

case "$BLOCK_BUTTON" in
    6) setsid -f "$TERMINAL" -e "$EDITOR" "$0" ;;
esac

get_status_icon() {
    case "$1" in
    "Full" | "Charging") printf ' \n' ;;
    "Discharging" | "Not charging") printf ' \n' ;;
    "Unknown" | *) exit 1 ;;
    esac
}

read -r value </sys/class/power_supply/$BATTERY/capacity
read -r status </sys/class/power_supply/$BATTERY/status

icon=$(get_status_icon "$status")

[ "$icon" = " " ] && [ "$value" -le 25 ] && icon=" "

printf '%s %s%%\n' "$icon" "$value"
