#!/bin/sh

set -eu

confirm() {
    [ "$(echo "no
yes" | fuzzel --dmenu --prompt="$1 ")" = "yes" ]
}

get_action() {
    echo "lock
suspend
exit
poweroff
reboot" | fuzzel --dmenu
}

case "${1:-$(get_action)}" in
lock) swaylock -f ;;
suspend) swaylock -f && loginctl suspend ;;
exit) confirm "exit?" && riverctl exit ;;
poweroff) confirm "poweroff?" && loginctl poweroff ;;
reboot) confirm "reboot?" && loginctl reboot ;;
*) exit 1 ;;
esac
