#!/bin/sh

set -eu

LOCK_INIT_COLOR="0x282828"
LOCK_INPUT_COLOR="0x458588"
LOCK_FAIL_COLOR="0xfb4934"

confirm() { [ "$(printf 'no\nyes' | fuzzel -d -p "$1 ")" = 'yes' ]; }

case "${1:-}" in
poweroff) confirm 'poweroff' && loginctl poweroff ;;
reboot) confirm 'reboot' && loginctl reboot ;;
suspend) loginctl suspend ;;
lock) waylock -fork-on-lock -ignore-empty-password -init-color "$LOCK_INIT_COLOR" -input-color "$LOCK_INPUT_COLOR" -fail-color "$LOCK_FAIL_COLOR" ;;
*) exit 1 ;;
esac
