#!/bin/sh

ADAPTER="wlan0"

address=$(ip route get 1)
address=${address#* via * dev * src }
address=${address% uid *}

ssid=
while read -r line; do
	case $line in
	*Connected\ network*)
		ssid=${line##*Connected network}
		ssid="${ssid#"${ssid%%[![:space:]]*}"}"
		;;
	esac
done <<EOF
$(iwctl station "$ADAPTER" show)
EOF

printf '<fc=#fc7932>%s</fc> @ %s\n' "$address" "$ssid"
