#!/bin/sh

set -eu

SINK="@DEFAULT_AUDIO_SINK@"

muted=
volume=$(wpctl get-volume "$SINK")

case $volume in
*\[MUTED\]) muted=1 ;;
esac
volume=${volume#Volume: }
volume=${volume%.*}${volume#*.}
volume=${volume#0}
volume=${volume#0}
volume=${volume% \[MUTED\]}

if [ -n "$muted" ]; then
	prefix="MUTE"
else
	prefix="VOL"
fi
printf '%s %s%%' "$prefix" "$volume"
