#!/bin/sh

set -eu

UGUU_BASE_URL="${UGUU_BASE_URL:-https://uguu.se}"

if [ "$1" = "-" ]; then
    data=$(cat /dev/stdin)
    file="$(mktemp).txt"
    trap 'rm -f -- "$file"' EXIT
    printf '%s' "$data" >"$file"
else
    file="$1"
fi

curl -sF "files[]=@$file" "$UGUU_BASE_URL/upload?output=text"
