#!/bin/sh

set -eu

die() {
    printf '%s' "\
${0##*/}: ${1}
" >&2
    exit 1
}

[ "$(printf '%s' "\
no
yes" | fuzzel -d)" = "yes" ] || die "canceled by user"

file=${1:-$(wl-paste)}

[ ! -f "${file}" ] && die "no such file"

uguu "${file}" || die "failed to upload"
