#!/bin/sh
# shellcheck disable=SC2249

set -eu

alias notify='notify-send -h string:x-dunst-stack-tag:"$0"'

IFS=',' read -r _ _ _ brightness _ <<EOF
$(brightnessctl -md "$1" s "$2")
EOF
brightness="${brightness%\%}"

case "$1" in
    intel_backlight|acpi_video*) device_name="Display" ;;
    *::kbd_backlight) device_name="Keyboard" ;;
esac


# notify() { notify-send -u low -h string:x-dunst-stack-tag:"$0" "$@"; }
# get_device_name() { case "$1" in intel_backlight | acpi_video*) echo 'Display' ;; *::kbd_backlight) echo 'Keyboard' ;; esac }
# set_brightness() { brightnessctl -md "$1" s "$2" | awk -F',' '{print $4 + 0}'; }

# brightness="$(set_brightness "$1" "$2")"
# [ -n "${WAYLAND_DISPLAY:-}" ] &&
#     notify -h int:value:"$brightness" "$(get_device_name "$1") Brightness"
