#!/bin/sh
# shellcheck disable=SC2249

set -eu

notify() { notify-send --urgency=low --hint=string:x-dunst-stack-tag:"$0" "$@"; }
get_device_name() { case "$1" in intel_backlight | acpi_video*) echo 'Display' ;; *::kbd_backlight) echo 'Keyboard' ;; esac }
set_brightness() { brightnessctl --machine-readable --device="$1" set "$2" | awk -F',' '{print $4 + 0}'; }

brightness="$(set_brightness "$1" "$2")"
[ -n "${WAYLAND_DISPLAY:-}" ] && notify --hint=int:value:"$brightness" "$(get_device_name "$1") Brightness"
